回路の構築方法
========================

毎日使っている多くのものは、家の電灯や読んでいるコンピューターのように、電気で動いています。

電気を使うためには、電気回路を構築する必要があります。基本的に回路とは、電気が流れる道、または電子回路であり、抵抗器、コンデンサー、電源、スイッチなどの電気デバイスやコンポーネントが特定の方法で接続されています。

.. image:: img/circuit.png
    :align: center
    :width: 250

.. raw:: html
    
    <br/>

回路は電子が移動し電流を作る閉じた経路です。電流を流すためには、電源の正極と負極の間に導電性の経路が必要で、これを閉回路と呼びます（途中で断たれている場合は開回路と呼ばれます）。

Arduinoボードにはいくつかの電力出力ピン（正極）とグラウンドピン（負極）があります。
これらのピンを電源の正極と負極として使用できます。

.. image:: img/08_circuit_1.png
    :align: center
    :width: 70%

電気を使って、光や音、動きのある作品を作ることができます。
LEDの長いピンを正極に、短いピンを負極に接続するとLEDを点灯させることができます。
しかし、これを直接行うと、LEDだけでなくUNO R4ボードのピンもすぐに損傷する可能性があります。これを避けるために、1kΩの抵抗器を回路に追加して、LEDとUNO R4のピンを保護することが重要です。

以下に示すのは、彼らが形成する回路です。

.. image:: img/08_circuit_2.png
    :align: center
    :width: 65%

.. raw:: html
    
    <br/>

ここで疑問が生じるかもしれません：この回路をどうやって構築するのか？ワイヤーを手で持つか、ピンとワイヤーをテープで固定するのか？

このような状況では、はんだ付け不要のブレッドボードが最強の味方となります。

.. _bc_bb:

こんにちは、ブレッドボード！
------------------------------

ブレッドボードは、たくさんの小さな穴が開いた長方形のプラスチック板です。
これらの穴により、電子部品を簡単に挿入し、電子回路を構築することができます。
ブレッドボードは電子部品を永久に固定しないため、何か問題が発生した場合には簡単に修理してやり直すことができます。

.. note::
    ブレッドボードを使用するために特別な道具は必要ありません。しかし、多くの電子部品は非常に小さいため、ピンセットを使って小さな部品をつまむのに役立ちます。

インターネット上では、ブレッドボードに関する多くの情報を見つけることができます。

* `How to Use a Breadboard - Science Buddies <https://www.sciencebuddies.org/science-fair-projects/references/how-to-use-a-breadboard#pth-smd>`_

* `What is a BREADBOARD? - Makezine <https://cdn.makezine.com/uploads/2012/10/breadboardworkshop.pdf>`_

ブレッドボードについて知っておくべきことがいくつかあります。

.. image:: ../components/img/breadboard_internal.png
    :align: center
    :width: 85%

.. raw:: html

   <br/>

#. 各半行グループ（例えば、1行目のA-E列や3行目のF-J列など）は接続されています。したがって、A1から電気信号が流れ込むと、B1、C1、D1、E1から流れ出すことができますが、F1やA2からは流れ出せません。

#. ほとんどの場合、ブレッドボードの両側は電源バスとして使用され、各列の穴（約50穴）が連結されています。一般的には、赤い線の近くの穴には正の電源が、青い線の近くの穴には負の電源が接続されます。

**電流の流れに沿って回路を構築しましょう！**

.. image:: img/08_circuit_3.png
    :align: center
    :width: 60%

.. raw:: html
    
    <br/>

1. この回路では、ボードの5Vピンを使用してLEDに電力を供給します。オス-オス（M2M）ジャンパーワイヤーを使用して、それを赤い電源バスに接続します。
#. LEDとUNO R4のピンを保護するために、電流は1kオームの抵抗器を通過する必要があります。抵抗器の一方の端（どちらの端でも）を赤い電源バスに、もう一方の端をブレッドボードの空いている行に接続します。

   .. note::
        1000オームの :ref:`cpn_resistor` の色リングは赤、黒、黒、茶、茶です。

#. LEDを手に取ると、そのリードの一方が他方よりも長いことに気づくでしょう。より長いリードを抵抗器と同じ行に接続し、短いリードを別の行に接続します。

   .. note::
        より長いリードはアノードであり、回路の正極を表しています。短いリードはカソードであり、負極を表しています。

        アノードは抵抗器を介してGPIOピンに接続する必要があります。カソードはGNDピンに接続する必要があります。

#. オス-オス（M2M）ジャンパーワイヤーを使用して、LEDの短いピンをブレッドボードの負の電源バスに接続します。
#. ボードのGNDピンをジャンパーを使って負の電源バスに接続します。

ショート回路に注意
------------------------------
ショート回路は、本来接続されるべきでない2つのコンポーネントが「偶然」接続されたときに発生します。
このキットには、抵抗器、トランジスター、コンデンサー、LEDなど、長い金属ピンを持つ部品が含まれており、これらが互いにぶつかってショートを引き起こす可能性があります。ショートが発生すると、一部の回路は正常に機能しなくなります。時々、特に電源とグラウンドバスの間でショート回路が発生すると、部品が永久に損傷を受けることがあり、回路が非常に熱くなり、ブレッドボードのプラスチックが溶け、部品が焼けることさえあります！

したがって、ブレッドボード上のすべての電子部品のピンが互いに触れていないことを常に確認してください。

回路の方向
-------------------------------
回路には方向があり、特定の電子部品では方向が重要な役割を果たします。極性を持つデバイスがあり、正極と負極に基づいて正しく接続する必要があります。間違った方向で構築された回路は正常に機能しません。

.. image:: img/08_circuit_4.png
    :align: center
    :width: 60%

.. raw:: html
    
    <br/>

先に構築したこの単純な回路でLEDを逆にすると、もう動作しないことがわかります。

それに対し、この回路の抵抗器のように方向を持たないデバイスもあります。それらを逆にしても、LEDの正常な動作には影響しません。

「+」、「-」、「GND」、「VCC」といったラベルが付いているコンポーネントや、長さの異なるピンを持つモジュールなどは、特定の方法で回路に接続する必要があります。



回路の保護
-------------------------------------

電流は、完全な電気回路内のある点を通過する電子の流れの割合です。基本的に、電流＝流れです。アンペア（アン・ピーア）、またはアンプは、電流を測定するために使用される国際単位です。それは、特定の時間内に回路のある点を通過する電子（「電気的荷電」と呼ばれることもある）の量を表します。

電流の流れの原動力（電圧）は電圧と呼ばれ、ボルト（V）で測定されます。

抵抗（R）は電流の流れを制限する材料の性質であり、オーム（Ω）で測定されます。

オームの法則によれば（温度が一定のままである限り）、電流、電圧、および抵抗は比例します。
回路の電流は、その電圧に比例し、その抵抗に反比例します。

したがって、電流（I）= 電圧（V）/ 抵抗（R）です。

* `オームの法則 - Wikipedia <https://en.wikipedia.org/wiki/Ohm%27s_law>`_

オームの法則について、簡単な実験を行うことができます。

.. image:: img/08_circuit_5.png
    :width: 55%

5Vから3.3Vに接続するワイヤーを変えると、LEDが暗くなります。
1000オームの抵抗器を2000オーム（色リング：赤、黒、黒、茶、茶）に変えると、LEDが以前よりも暗くなることに気づくでしょう。抵抗器が大きいほど、LEDは暗くなります。

ほとんどのパッケージ化されたモジュールは、適切な電圧（通常は3.3Vまたは5V）のみを必要とします。たとえば、超音波モジュールなどです。

しかし、自分で構築した回路では、電気デバイスの供給電圧と抵抗器の使用に注意する必要があります。

例として、LEDは通常20mAの電流を消費し、電圧降下は約1.8Vです。オームの法則によれば、5Vの電源を使用する場合、LEDを焼損しないために、最低でも160オームの抵抗器を接続する必要があります（（5-1.8）/20mA）。


Arduinoによる回路の制御
--------------------------------

Arduinoプログラミングと電子回路の基本を理解した今、最も重要な質問に直面する時が来ました：Arduinoで回路をどのように制御するか？

簡単に言うと、Arduinoが回路を制御する方法は、ボード上のピンのレベルを変更することです。たとえば、オンボードLEDを制御するときは、ピン13に高または低レベルの信号を書き込むことです。

さて、ブレッドボード上の点滅するLEDを制御するためにArduinoボードをコード化してみましょう。LEDがピン9に接続されるように回路を構築します。

.. image:: img/08_circuit_6.png
    :width: 400
    :align: center


次に、このスケッチをArduino開発ボードにアップロードします。

.. code-block:: C

    int ledPin = 9;
    int delayTime = 500;

    void setup() {
        pinMode(ledPin,OUTPUT); 
    }

    void loop() {
        digitalWrite(ledPin,HIGH); 
        delay(delayTime); 
        digitalWrite(ledPin,LOW); 
        delay(delayTime);
    }

このスケッチは、オンボードLEDの点滅を制御するために使用したものと非常に似ていますが、違いは ``ledPin`` の値が9に変更されていることです。
これは、今回はピン9のレベルを制御しようとしているからです。

これで、ブレッドボード上のLEDが点滅するのが見えるはずです。
